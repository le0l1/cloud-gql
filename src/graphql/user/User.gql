"用户"
type User implements Node {
  "用户id"
  id: ID!
  
  "用户姓名"
  name: String

  "用户头像"
  profilePicture: String

  "用户手机号"
  phone: Number

  "汽修厂名称"
  garage: String

  "订货城市"
  city: String

  "地区"
  area: String

  "详细地址"
  address: String

  "用户角色"
  role: Role
}

"用户注册输入"
input UserRegisterInput {
  "用户姓名"
  name: String
  
  "用户手机号"
  phone: Number!

  "用户密码"
  password: String!

  "汽修厂名称"
  garage: String

  "订货城市"
  city: String

  "地区"
  area: String

  "详细地址"
  address: String

  "短信验证码"
  smsCode: Number!
}

"用户登录输入"
input UserLoginInput {
  "用户手机号"
  phone: Number!
  "用户密码"
  password: String!
}

"用户查询输入"
input UsersQueryInput {
  "模糊查询文本"
  tsQuery: String
  "用户筛选条件"
  filters: UsersQueryFilter
  "偏离值"
  offset: Int
  "分页条数"
  limit: Int
}

"用户角色"
enum Role {
  "顾客"
  CUSTOMER
  "商家"
  MERCHANT
  "管理员"
  ROOT
}

"用户查询筛选条件"
input UsersQueryFilter {
  "地区"
  area: String
  "角色"
  role: Role
}

"单一用户查询"
input UserQueryInput {
  "用户id"
  id: ID!
}

"用户注册返回"
type UserRegisterResult {
  "用户id"
  id: ID!
}

"用户登陆返回"
type UserLoginResult {
  "用户id"
  id: ID
  "用户姓名"
  name: String
  "用户手机号"
  phone: Number
  "用户地址"
  address: String
  "用户登陆凭证"
  token: String
  "用户角色"
  role: Role!
}

"用户删除"
input UserDeleteInput {
  "指定删除用户id"
  id: ID!
}

"找回密码输入"
input RetrievePasswordInput {
  "手机号码"
  phone: Number!

  "短信验证码"
  smsCode: Number!

  "重新设置的密码"
  password: String!
}

"删除用户返回"
type UserDeleteResult {
  "被删除id"
  id: ID!
  "删除结果"
  status: Boolean
}
"找回密码结果"
type RetrievePasswordResult {
  "被删除id"
  id: ID!
  "删除结果"
  status: Boolean
}

"用户列表"
type UserConnection {
  pageInfo: PageInfo!
  edges: [User!]
}

extend type Query {
  users(usersQueryInput: UsersQueryInput!): UserConnection! @auth
  user(userQueryInput: UserQueryInput!): User
}

extend type Mutation {
  "用户注册"
  register(userRegisterInput: UserRegisterInput!): UserRegisterResult!
  "用户登录"
  loginIn(userLoginInput: UserLoginInput!): UserLoginResult!
  "用户删除"
  deleteUser(userDeleteInput: UserDeleteInput!): UserDeleteResult!
    @auth(requires: ROOT)

  "找回密码"
  retrievePassword(
    retrievePasswordInput: RetrievePasswordInput!
  ): RetrievePasswordResult!
}
